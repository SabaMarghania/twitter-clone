{"ast":null,"code":"import _slicedToArray from\"/home/sab4/Desktop/twitter-clone/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import'./Chat.css';import Avatar from'@material-ui/core/Avatar';import SettingsOutlinedIcon from'@material-ui/icons/SettingsOutlined';import ImageOutlinedIcon from'@material-ui/icons/ImageOutlined';import SendIcon from'@material-ui/icons/Send';import ChatProfile from'./ChatProfile';import Axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Chat(){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),message=_useState2[0],setMessage=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),messages=_useState4[0],setMessages=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),file=_useState6[0],setFile=_useState6[1];var onChangeFile=function onChangeFile(e){setFile(e.target.files[0]);};useEffect(function(){var flag=true;Axios.get(\"https://mern-twitter-clone-project.herokuapp.com/getMessages\").then(function(res){if(flag){setMessages(res.data);}});return function(){return flag=false;};},[messages]);var HandleMessage=function HandleMessage(e){e.preventDefault();var formData=new FormData();formData.append(\"message\",message);formData.append(\"messageImage\",file);Axios.post(\"https://mern-twitter-clone-project.herokuapp.com/message\",formData).then(function(res){return setMessages(res.data);}).catch(function(err){console.log(err);});setMessage('');};var HandleText=function HandleText(e){e.preventDefault();var formData=new FormData();formData.append(\"message\",message);Axios.post(\"https://mern-twitter-clone-project.herokuapp.com/message2\",formData).then(function(res){return setMessages(res.data);}).catch(function(err){console.log(err);});setMessage('');};return/*#__PURE__*/_jsxs(\"div\",{className:\"chat\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"chat__container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"chat__top__box\",children:[/*#__PURE__*/_jsx(Avatar,{style:{width:'30px',height:'30px'}}),/*#__PURE__*/_jsxs(\"div\",{className:\"chat__top__box__cont\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Saba Marghania\"}),/*#__PURE__*/_jsx(\"p\",{children:\"@SMarghania\"})]})]}),/*#__PURE__*/_jsx(SettingsOutlinedIcon,{style:{cursor:'pointer'}})]}),/*#__PURE__*/_jsx(\"div\",{className:\"chat__message__section\",children:messages.map(function(value){return/*#__PURE__*/_jsx(ChatProfile,{id:value._id,message:value.message,messageimg:value.messageimg},value._id);})}),/*#__PURE__*/_jsx(\"div\",{className:\"chat__bottom__box\",children:/*#__PURE__*/_jsx(\"form\",{onSubmit:file?HandleMessage:HandleText,children:/*#__PURE__*/_jsxs(\"div\",{className:\"chat__bottom__form\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"chat__bottom__icons\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"home__uploadImage\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"messageImage\",children:/*#__PURE__*/_jsx(ImageOutlinedIcon,{style:{color:'rgba(29,161,242,1.00)',cursor:'pointer'}})}),/*#__PURE__*/_jsx(\"input\",{id:\"messageImage\",onChange:onChangeFile,name:\"messageImage\",type:\"file\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"chat__bottom__input\",children:/*#__PURE__*/_jsx(\"input\",{onChange:function onChange(e){return setMessage(e.target.value);},type:\"text\",placeholder:\"Start a new message\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"chat__bottom__icons2 \",children:(message||file)&&/*#__PURE__*/_jsx(SendIcon,{onClick:file?HandleMessage:HandleText,style:{color:\"rgb(29, 161, 242)\",cursor:'pointer'}})})]})})})]});}export default Chat;","map":{"version":3,"sources":["/home/sab4/Desktop/twitter-clone/client/src/components/Chat.js"],"names":["React","useState","useEffect","Avatar","SettingsOutlinedIcon","ImageOutlinedIcon","SendIcon","ChatProfile","Axios","Chat","message","setMessage","messages","setMessages","file","setFile","onChangeFile","e","target","files","flag","get","then","res","data","HandleMessage","preventDefault","formData","FormData","append","post","catch","err","console","log","HandleText","width","height","cursor","map","value","_id","messageimg","color"],"mappings":"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","sourcesContent":["import React,{useState,useEffect} from 'react'\nimport './Chat.css'\nimport Avatar from '@material-ui/core/Avatar';\nimport SettingsOutlinedIcon from '@material-ui/icons/SettingsOutlined';\nimport ImageOutlinedIcon from '@material-ui/icons/ImageOutlined';\nimport SendIcon from '@material-ui/icons/Send';\nimport ChatProfile from './ChatProfile';\nimport Axios from 'axios'\n\nfunction Chat() {\n    const [message, setMessage] = useState('')\n    const [messages, setMessages] = useState([])\n    const [file, setFile] = useState('')\n\n    const onChangeFile = (e) =>{\n        setFile(e.target.files[0]);\n    }\n\n    useEffect(() => {\n\n        let flag = true\n     \n        Axios.get(\"https://mern-twitter-clone-project.herokuapp.com/getMessages\", )\n            .then((res) => {\n                if (flag) {\n                    setMessages(res.data);\n                }\n            })\n\n          \n        return () => flag = false\n    }, [messages])\n    const HandleMessage =  (e)  =>{\n        e.preventDefault()\n        const formData = new FormData();\n        formData.append(\"message\", message)\n        formData.append(\"messageImage\", file)\n\n        Axios.post(\"https://mern-twitter-clone-project.herokuapp.com/message\",formData)\n        .then((res)=>setMessages(res.data))\n        .catch((err)=>{\n            console.log(err);\n        })\n        setMessage('')\n    }\n    const HandleText =  (e)  =>{\n        e.preventDefault()\n        const formData = new FormData();\n        formData.append(\"message\", message)\n\n        Axios.post(\"https://mern-twitter-clone-project.herokuapp.com/message2\",formData)\n        .then((res)=>setMessages(res.data))\n        .catch((err)=>{\n            console.log(err);\n        })\n        setMessage('')\n \n    }\n\n \n    \n    return (\n        <div className='chat'>\n            <div className='chat__container'>\n            <div className=\"chat__top__box\">\n                <Avatar style={{width:'30px',height:'30px'}}/>\n                <div className=\"chat__top__box__cont\">\n                    <h3>Saba Marghania</h3>\n                    <p>@SMarghania</p>\n                </div>\n            </div>\n            <SettingsOutlinedIcon style={{cursor:'pointer'}}/>\n            </div>\n            \n            <div className=\"chat__message__section\">\n             {messages.map((value)=>{\n                  return (\n                      <ChatProfile\n                      key={value._id}\n                      id={value._id}\n                      message={value.message}\n                      messageimg={value.messageimg}\n                      />\n                  )\n              })}\n            </div>\n\n            <div className=\"chat__bottom__box\">\n            <form onSubmit={file ? HandleMessage : HandleText}>\n                <div className=\"chat__bottom__form\">\n                    <div className=\"chat__bottom__icons\">\n                    <div className=\"home__uploadImage\">\n                        <label htmlFor=\"messageImage\">\n                            <ImageOutlinedIcon style={{color:'rgba(29,161,242,1.00)',cursor:'pointer'}}/>\n                        </label>\n                        <input id=\"messageImage\" \n                        onChange={onChangeFile} \n                        name=\"messageImage\" \n                        type=\"file\" \n                        />\n\n                    </div>\n                    </div>\n                    <div className=\"chat__bottom__input\">\n                        <input onChange={ (e) => setMessage(e.target.value)} type=\"text\" placeholder='Start a new message' />\n                    </div>\n                    <div className=\"chat__bottom__icons2 \">\n                  { (message || file)  &&    <SendIcon  onClick={file ? HandleMessage : HandleText} style={{color: \"rgb(29, 161, 242)\",cursor:'pointer'}} />\n }\n  </div>\n                </div>\n  </form>\n            </div>\n        </div>\n    )\n}\n\nexport default Chat\n"]},"metadata":{},"sourceType":"module"}