{"ast":null,"code":"import _slicedToArray from\"/home/sab4/Desktop/twitter-clone/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import Avatar from'@material-ui/core/Avatar';import'./Poll.css';import MoreHorizIcon from'@material-ui/icons/MoreHoriz';import ClickAwayListener from'@material-ui/core/ClickAwayListener';import DeleteOutlineIcon from'@material-ui/icons/DeleteOutline';import EditOutlinedIcon from'@material-ui/icons/EditOutlined';import Axios from'axios';import Modal from'@material-ui/core/Modal';import{useSelector}from\"react-redux\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function Poll(_ref){var title=_ref.title,option1=_ref.option1,option2=_ref.option2,option3=_ref.option3,id=_ref.id;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),checked=_useState2[0],setChecked=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),checked1=_useState4[0],setChecked1=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),checked2=_useState6[0],setChecked2=_useState6[1];var _useState7=useState(0),_useState8=_slicedToArray(_useState7,2),count=_useState8[0],setCount=_useState8[1];var _useState9=useState(0),_useState10=_slicedToArray(_useState9,2),count1=_useState10[0],setCount1=_useState10[1];var _useState11=useState(0),_useState12=_slicedToArray(_useState11,2),count2=_useState12[0],setCount2=_useState12[1];var _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),Isopen=_useState14[0],setIsOpen=_useState14[1];var _useState15=useState(false),_useState16=_slicedToArray(_useState15,2),update=_useState16[0],setUpdate=_useState16[1];var _useState17=useState(false),_useState18=_slicedToArray(_useState17,2),open=_useState18[0],setOpen=_useState18[1];//poll edit\nvar _useState19=useState(''),_useState20=_slicedToArray(_useState19,2),newTitle=_useState20[0],setNewTitle=_useState20[1];var _useState21=useState(''),_useState22=_slicedToArray(_useState21,2),newOption1=_useState22[0],setNewOption1=_useState22[1];var _useState23=useState(''),_useState24=_slicedToArray(_useState23,2),newOption2=_useState24[0],setNewOption2=_useState24[1];var _useState25=useState(''),_useState26=_slicedToArray(_useState25,2),newOption3=_useState26[0],setNewOption3=_useState26[1];//modal\nvar handleClick=function handleClick(){setOpen(function(prev){return!prev;});};var handleClickAway=function handleClickAway(){setOpen(false);};var func=function func(){setCount(count1||count2===1?0:1);setChecked(checked1||checked2?false:true);};var func1=function func1(){setCount1(count||count2===1?0:1);setChecked1(checked||checked2?false:true);};var func2=function func2(){setCount2(count||count1===1?0:1);setChecked2(checked||checked1?false:true);};var delFun=function delFun(){setChecked(false);setChecked1(false);setChecked2(false);setCount(0);setCount1(0);setCount2(0);};//edit & del modal\nvar handleOpen=function handleOpen(){setIsOpen(true);};var handleClose=function handleClose(){setIsOpen(false);};//edit post\nvar editPoll=function editPoll(){setUpdate(true);setTimeout(function(){setIsOpen(false);},500);Axios.put(\"https://mern-twitter-clone-project.herokuapp.com/editPoll\",{id:id,newTitle:newTitle,newOption1:newOption1,newOption2:newOption2,newOption3:newOption3});};//delete post\nvar delPoll=function delPoll(){Axios.delete(\"https://mern-twitter-clone-project.herokuapp.com/deletePoll/\".concat(id));};var userLogin=useSelector(function(state){return state.userLogin;});var userInfo=userLogin.userInfo;var body=/*#__PURE__*/_jsxs(\"div\",{className:\"edit_poll_modal_body\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Edit the poll\"}),update&&/*#__PURE__*/_jsx(\"h1\",{style:{color:'green',marginTop:'10px'},children:\"Poll has been updated\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"edit_poll_modal_body_cont\",children:[/*#__PURE__*/_jsx(\"input\",{onChange:function onChange(e){setNewTitle(e.target.value);},type:\"text\",placeholder:\"Title..\"}),/*#__PURE__*/_jsx(\"input\",{onChange:function onChange(e){setNewOption1(e.target.value);},type:\"text\",placeholder:\"Option 1..\"}),/*#__PURE__*/_jsx(\"input\",{onChange:function onChange(e){setNewOption2(e.target.value);},type:\"text\",placeholder:\"Option 2..\"}),/*#__PURE__*/_jsx(\"input\",{onChange:function onChange(e){setNewOption3(e.target.value);},type:\"text\",placeholder:\"Option 3..\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"edit_poll_modal_button\",children:/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return editPoll(id);},type:\"submit\",children:\"Edit\"})})]});return/*#__PURE__*/_jsxs(\"div\",{className:\"poll\",children:[/*#__PURE__*/_jsx(Avatar,{src:userInfo===null||userInfo===void 0?void 0:userInfo.pic,style:{width:'50px',height:'50px'}}),/*#__PURE__*/_jsxs(\"div\",{className:\"post__info\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"post__info_cont\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"post__info_names\",children:[/*#__PURE__*/_jsx(\"h4\",{children:userInfo===null||userInfo===void 0?void 0:userInfo.username}),/*#__PURE__*/_jsxs(\"p\",{children:[\"@\",userInfo===null||userInfo===void 0?void 0:userInfo.username]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"post__info__edit\",children:/*#__PURE__*/_jsx(ClickAwayListener,{onClickAway:handleClickAway,children:/*#__PURE__*/_jsxs(\"div\",{className:\"post_modal_root\",children:[/*#__PURE__*/_jsx(MoreHorizIcon,{onClick:handleClick,style:{cursor:'pointer'}}),open?/*#__PURE__*/_jsxs(\"div\",{className:\"post_modal_dropdown\",children:[/*#__PURE__*/_jsxs(\"div\",{onClick:function onClick(){return delPoll(id);},className:\"post_modal__option\",children:[/*#__PURE__*/_jsx(DeleteOutlineIcon,{style:{color:'red'}}),/*#__PURE__*/_jsx(\"h4\",{children:\"Delete\"})]}),/*#__PURE__*/_jsxs(\"div\",{onClick:handleOpen,className:\"post_modal__option\",children:[/*#__PURE__*/_jsx(EditOutlinedIcon,{style:{color:'black',fontSize:'20px'}}),/*#__PURE__*/_jsx(\"h4\",{style:{color:'#000'},children:\"Edit\"})]})]}):null]})})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"poll_cont\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"poll__title\",children:/*#__PURE__*/_jsx(\"h4\",{children:title})}),/*#__PURE__*/_jsxs(\"div\",{className:\"poll__options\",children:[option1&&/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"poll__option\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"poll__option_cont\",onClick:func,children:/*#__PURE__*/_jsxs(\"div\",{style:{width:checked?'50px':'auto',background:checked?'rgb(202, 202, 202)':'none'},className:\"poll__option_count\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",name:\"option\",id:\"\"}),/*#__PURE__*/_jsx(\"div\",{className:\"poll__option__info\",children:/*#__PURE__*/_jsx(\"h4\",{children:option1})})]})}),/*#__PURE__*/_jsx(\"p\",{children:count})]})}),option2&&/*#__PURE__*/_jsxs(\"div\",{className:\"poll__option\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"poll__option_cont\",onClick:func1,children:/*#__PURE__*/_jsxs(\"div\",{style:{width:checked1?'50px':'auto',background:checked1?'rgb(202, 202, 202)':'none'},className:\"poll__option_count\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",name:\"option\",id:\"\"}),/*#__PURE__*/_jsx(\"div\",{className:\"poll__option__info\",children:/*#__PURE__*/_jsx(\"h4\",{children:option2})})]})}),/*#__PURE__*/_jsx(\"p\",{children:count1})]}),option3&&/*#__PURE__*/_jsxs(\"div\",{className:\"poll__option\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"poll__option_cont\",onClick:func2,children:/*#__PURE__*/_jsxs(\"div\",{style:{width:checked2?'50px':'auto',background:checked2?'rgb(202, 202, 202)':'none'},className:\"poll__option_count\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",name:\"option\",id:\"\"}),/*#__PURE__*/_jsx(\"div\",{className:\"poll__option__info\",children:/*#__PURE__*/_jsx(\"h4\",{children:option3})})]})}),/*#__PURE__*/_jsx(\"p\",{children:count2})]})]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:delFun,type:\"submit\",children:\"Delete Choice\"})]}),/*#__PURE__*/_jsx(Modal,{open:Isopen,onClose:handleClose,\"aria-labelledby\":\"simple-modal-title\",\"aria-describedby\":\"simple-modal-description\",children:body})]});}export default Poll;","map":{"version":3,"sources":["/home/sab4/Desktop/twitter-clone/client/src/components/Poll.js"],"names":["React","useState","Avatar","MoreHorizIcon","ClickAwayListener","DeleteOutlineIcon","EditOutlinedIcon","Axios","Modal","useSelector","Poll","title","option1","option2","option3","id","checked","setChecked","checked1","setChecked1","checked2","setChecked2","count","setCount","count1","setCount1","count2","setCount2","Isopen","setIsOpen","update","setUpdate","open","setOpen","newTitle","setNewTitle","newOption1","setNewOption1","newOption2","setNewOption2","newOption3","setNewOption3","handleClick","prev","handleClickAway","func","func1","func2","delFun","handleOpen","handleClose","editPoll","setTimeout","put","delPoll","delete","userLogin","state","userInfo","body","color","marginTop","e","target","value","pic","width","height","username","cursor","fontSize","background"],"mappings":"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","sourcesContent":["import React,{useState} from 'react'\nimport Avatar from '@material-ui/core/Avatar';\nimport './Poll.css'\nimport MoreHorizIcon from '@material-ui/icons/MoreHoriz';\nimport ClickAwayListener from '@material-ui/core/ClickAwayListener';\nimport DeleteOutlineIcon from '@material-ui/icons/DeleteOutline';\nimport EditOutlinedIcon from '@material-ui/icons/EditOutlined';\nimport Axios from 'axios'\nimport Modal from '@material-ui/core/Modal';\nimport {  useSelector } from \"react-redux\";\n\nfunction Poll({title,option1,option2,option3,id}) {\n    const [checked,setChecked] = useState(false)\n    const [checked1,setChecked1] = useState(false)\n    const [checked2,setChecked2] = useState(false)\n    let [count,setCount] = useState(0)\n    let [count1,setCount1] = useState(0)\n    let [count2,setCount2] = useState(0)\n    const [Isopen, setIsOpen] = useState(false);\n    const [update, setUpdate] = useState(false);\n    const [open, setOpen] = useState(false);\n\n    //poll edit\n    const [newTitle, setNewTitle] = useState('')\n    const [newOption1, setNewOption1] = useState('')\n    const [newOption2, setNewOption2] = useState('')\n    const [newOption3, setNewOption3] = useState('')\n\n //modal\n const handleClick = () => {\n    setOpen((prev) => !prev);\n  };\n\n  const handleClickAway = () => {\n    setOpen(false);\n  };\n\n        const func = () =>{\n            setCount(count1 || count2===1 ? 0 : 1);\n            setChecked(checked1 || checked2 ? false : true)\n        } \n        const func1 = () =>{\n            setCount1(count || count2===1 ? 0 : 1);\n            setChecked1(checked || checked2 ? false : true)\n        }\n        const func2 = () =>{\n            setCount2(count || count1===1 ? 0 : 1);\n            setChecked2(checked || checked1 ? false : true)\n        }\n        const delFun = () =>{\n            setChecked(false)\n            setChecked1(false)\n            setChecked2(false)\n            setCount(0)\n            setCount1(0)\n            setCount2(0)\n        }\n\n         //edit & del modal\n  const handleOpen = () => {\n    setIsOpen(true);\n  };\n\n  const handleClose = () => {\n    setIsOpen(false);\n  };\n\n  //edit post\n  const editPoll = () =>{\n    setUpdate(true)\n    \n    setTimeout(()=>{\n        setIsOpen(false);\n\n    },500)\n    Axios.put(\"https://mern-twitter-clone-project.herokuapp.com/editPoll\",{\n        id:id,\n        newTitle:newTitle,\n        newOption1:newOption1,\n        newOption2:newOption2,\n        newOption3:newOption3,\n     })\n   \n  }\n  //delete post\n  const delPoll = () =>{\n    Axios.delete(`https://mern-twitter-clone-project.herokuapp.com/deletePoll/${id}`)\n   \n  }\n\n  const userLogin = useSelector((state) => state.userLogin);\n  const {userInfo } = userLogin;\n\n  const body = (\n    <div className=\"edit_poll_modal_body\">\n        <h1>Edit the poll</h1>\n\n            {update && <h1 style={{color:'green',marginTop:'10px'}}>Poll has been updated</h1>}\n        <div className=\"edit_poll_modal_body_cont\">\n            <input onChange={(e)=>{setNewTitle(e.target.value)}} type=\"text\" placeholder='Title..' />\n            <input onChange={(e)=>{setNewOption1(e.target.value)}} type=\"text\" placeholder='Option 1..' />\n            <input onChange={(e)=>{setNewOption2(e.target.value)}} type=\"text\" placeholder='Option 2..' />\n            <input onChange={(e)=>{setNewOption3(e.target.value)}} type=\"text\" placeholder='Option 3..' />\n        </div>\n        <div className=\"edit_poll_modal_button\">\n            <button onClick={()=>editPoll(id)} type='submit'>Edit</button>\n        </div>\n   \n    </div>\n  );\n    return (\n        <div className='poll'>\n            <Avatar src={userInfo?.pic} style={{width:'50px',height:'50px'}} />\n            <div className=\"post__info\">\n            <div className=\"post__info_cont\">\n                <div className=\"post__info_names\">\n                    <h4>{userInfo?.username}</h4>\n                    <p>@{userInfo?.username}</p>   \n                  \n                </div>\n                <div className=\"post__info__edit\">\n                   \n                    <ClickAwayListener onClickAway={handleClickAway}>\n                        <div className='post_modal_root'>\n                        <MoreHorizIcon onClick={handleClick} style={{cursor:'pointer'}}/>\n                            {open ? (\n                            <div className='post_modal_dropdown'>\n                                <div onClick={()=>delPoll(id)} className=\"post_modal__option\">\n                                    <DeleteOutlineIcon style={{color:'red'}}/>\n                                    <h4>Delete</h4>\n                                </div>\n                                <div onClick={handleOpen} className=\"post_modal__option\">\n                                    <EditOutlinedIcon style={{color:'black',fontSize:'20px'}}/>\n                                    <h4 style={{color:'#000'}} >Edit</h4>\n                                </div>\n                            </div>\n                            ) : null}\n                        </div>\n                        </ClickAwayListener>\n                </div>\n                \n                </div>\n             \n                <div className=\"poll_cont\">\n                    <div className=\"poll__title\">\n                        <h4>{title}</h4>\n                    </div>\n                   \n                      <div className=\"poll__options\">\n                    {option1 &&\n                    <>\n                          <div className=\"poll__option\">\n                              <div className=\"poll__option_cont\"  onClick={func}>\n                               <div style={{width: checked ? '50px' : 'auto',background: checked ? 'rgb(202, 202, 202)' : 'none'}} className=\"poll__option_count\">\n                                   \n                                <input type=\"radio\" name=\"option\" id=\"\"/>\n                                <div className=\"poll__option__info\">\n                                    <h4>{option1}</h4>\n                                </div>\n                               </div>\n                              </div>\n                              <p>{count}</p>\n                         \n                          \n                        </div>\n                    </>\n                    }\n                    {option2 &&   \n                               <div className=\"poll__option\">\n                               <div className=\"poll__option_cont\"  onClick={func1}>\n                                <div style={{width: checked1 ? '50px' : 'auto',background: checked1 ? 'rgb(202, 202, 202)' : 'none'}} className=\"poll__option_count\">\n                                    \n                                 <input type=\"radio\" name=\"option\" id=\"\"/>\n                                 <div className=\"poll__option__info\">\n                                     <h4>{option2}</h4>\n                                 </div>\n                              \n                                </div>\n                               </div>\n                               <p>{count1}</p>\n                          \n                           \n                         </div>\n                        }\n                    {option3 && \n                                <div className=\"poll__option\">\n                                <div className=\"poll__option_cont\"  onClick={func2}>\n                                 <div style={{width: checked2 ? '50px' : 'auto',background: checked2 ? 'rgb(202, 202, 202)' : 'none'}} className=\"poll__option_count\">\n                                     \n                                  <input type=\"radio\" name=\"option\" id=\"\"/>\n                                  <div className=\"poll__option__info\">\n                                      <h4>{option3}</h4>\n                                  </div>\n                               \n                                 </div>\n                                </div>\n                                <p>{count2}</p>\n                           \n                            \n                          </div>\n                    }\n                    </div>\n                  \n                    </div>\n\n                    <button onClick={delFun} type=\"submit\">Delete Choice</button>\n                </div>\n                <Modal\n                open={Isopen}\n                onClose={handleClose}\n                aria-labelledby=\"simple-modal-title\"\n                aria-describedby=\"simple-modal-description\"\n             >\n                {body}\n            </Modal>\n        </div>\n    )\n}\n\nexport default Poll\n"]},"metadata":{},"sourceType":"module"}