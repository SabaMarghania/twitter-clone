{"ast":null,"code":"import _regeneratorRuntime from\"/home/sab4/Desktop/twitter-clone/client/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/sab4/Desktop/twitter-clone/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/sab4/Desktop/twitter-clone/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import'./Chat.css';import Avatar from'@material-ui/core/Avatar';import SettingsOutlinedIcon from'@material-ui/icons/SettingsOutlined';import ImageOutlinedIcon from'@material-ui/icons/ImageOutlined';import SendIcon from'@material-ui/icons/Send';import ChatProfile from'./ChatProfile';import Axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Chat(){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),message=_useState2[0],setMessage=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),messages=_useState4[0],setMessages=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),fileData=_useState6[0],setFileData=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),load=_useState8[0],setLoad=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),images=_useState10[0],setFile=_useState10[1];var onChangeFile=function onChangeFile(e){setFileData(e.target.files[0]);setFile(e.target.value);};useEffect(function(){var flag=true;// http://localhost:3001\nAxios.get(\"http://localhost:3001/getMessages\").then(function(res){if(flag){setMessages(res.data);}});if(load){setTimeout(function(){setLoad(false);},1000);}return function(){return flag=false;};},[load]);var HandleMessage=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var formData;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(load===false){setLoad(true);}else{setLoad(false);}e.preventDefault();formData=new FormData();formData.append(\"message\",message);formData.append(\"image\",fileData);_context.next=7;return Axios.post(\"http://localhost:3001/message\",formData).then(function(){setFileData('');setMessage('');setLoad(true);}).catch(function(err){console.log(err);});case 7:case\"end\":return _context.stop();}}},_callee);}));return function HandleMessage(_x){return _ref.apply(this,arguments);};}();var HandleText=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e){var formData;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(load===false){setLoad(true);}else{setLoad(false);}e.preventDefault();formData=new FormData();formData.append(\"message\",message);_context2.next=6;return Axios.post(\"http://localhost:3001/message2\",formData).then(function(){setMessage('');setLoad(true);}).catch(function(err){console.log(err);});case 6:case\"end\":return _context2.stop();}}},_callee2);}));return function HandleText(_x2){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"chat\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"chat__container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"chat__top__box\",children:[/*#__PURE__*/_jsx(Avatar,{style:{width:'30px',height:'30px'}}),/*#__PURE__*/_jsxs(\"div\",{className:\"chat__top__box__cont\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Saba Marghania\"}),/*#__PURE__*/_jsx(\"p\",{children:\"@SMarghania\"})]})]}),/*#__PURE__*/_jsx(SettingsOutlinedIcon,{style:{cursor:'pointer'}})]}),/*#__PURE__*/_jsx(\"div\",{className:\"chat__message__section\",children:messages.map(function(value){return/*#__PURE__*/_jsx(ChatProfile,{id:value._id,message:value.message,messageimg:value.image},value._id);})}),/*#__PURE__*/_jsx(\"div\",{className:\"chat__bottom__box\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"chat__bottom__form\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"chat__bottom__icons\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"home__uploadImage\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"messageImage\",children:/*#__PURE__*/_jsx(ImageOutlinedIcon,{style:{color:'rgba(29,161,242,1.00)',cursor:'pointer'}})}),/*#__PURE__*/_jsx(\"input\",{id:\"messageImage\",onChange:onChangeFile,name:\"file\",type:\"file\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"chat__bottom__input\",children:/*#__PURE__*/_jsx(\"input\",{onChange:function onChange(e){return setMessage(e.target.value);},type:\"text\",placeholder:\"Start a new message\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"chat__bottom__icons2 \",children:(message||fileData)&&/*#__PURE__*/_jsx(SendIcon,{onClick:fileData?HandleMessage:HandleText,style:{color:\"rgb(29, 161, 242)\",cursor:'pointer'}})})]})})]});}export default Chat;","map":{"version":3,"sources":["/home/sab4/Desktop/twitter-clone/client/src/components/Chat.js"],"names":["React","useState","useEffect","Avatar","SettingsOutlinedIcon","ImageOutlinedIcon","SendIcon","ChatProfile","Axios","Chat","message","setMessage","messages","setMessages","fileData","setFileData","load","setLoad","images","setFile","onChangeFile","e","target","files","value","flag","get","then","res","data","setTimeout","HandleMessage","preventDefault","formData","FormData","append","post","catch","err","console","log","HandleText","width","height","cursor","map","_id","image","color"],"mappings":"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","sourcesContent":["import React,{useState,useEffect} from 'react'\nimport './Chat.css'\nimport Avatar from '@material-ui/core/Avatar';\nimport SettingsOutlinedIcon from '@material-ui/icons/SettingsOutlined';\nimport ImageOutlinedIcon from '@material-ui/icons/ImageOutlined';\nimport SendIcon from '@material-ui/icons/Send';\nimport ChatProfile from './ChatProfile';\nimport Axios from 'axios'\n\nfunction Chat() {\n    const [message, setMessage] = useState('')\n    const [messages, setMessages] = useState([])\n    const [fileData, setFileData] = useState('');\n    const [load, setLoad] = useState(false);\n    const [images, setFile] = useState(\"\");\n\n    const onChangeFile = (e) =>{\n        setFileData(e.target.files[0]);\n        setFile(e.target.value)\n    }\n\n    useEffect(() => {\n        let flag = true\n     // http://localhost:3001\n        Axios.get(\"http://localhost:3001/getMessages\",)\n            .then((res) => {\n                if (flag) {\n                    setMessages(res.data);\n                }\n            })\n            if(load) {\n                setTimeout(() => {\n                  setLoad(false);\n                }, 1000)\n              }\n          \n        return () => flag = false\n    }, [load])\n\n    const HandleMessage = async (e)  =>{\n        if(load===false){\n            setLoad(true)\n        }else{\n            setLoad(false)\n        }\n        e.preventDefault()\n        const formData = new FormData();\n        formData.append(\"message\", message)\n        formData.append(\"image\", fileData)\n       \n\n       await Axios.post(\"http://localhost:3001/message\",formData)\n       .then(() => {\n        setFileData('');\n        setMessage('');\n        setLoad(true);\n      })\n       .catch((err)=>{\n           console.log(err);\n       })\n\n    }\n    const HandleText =  async (e)  =>{\n        if(load===false){\n            setLoad(true)\n        }else{\n            setLoad(false)\n        }\n        e.preventDefault()\n        const formData = new FormData();\n        formData.append(\"message\", message)\n       \n\n        await Axios.post(\"http://localhost:3001/message2\",formData)\n        .then(() => {\n            setMessage('');\n            setLoad(true);\n          })\n        .catch((err)=>{\n            console.log(err);\n        })\n \n    }\n\n \n    \n    return (\n        <div className='chat'>\n            <div className='chat__container'>\n            <div className=\"chat__top__box\">\n                <Avatar style={{width:'30px',height:'30px'}}/>\n                <div className=\"chat__top__box__cont\">\n                    <h3>Saba Marghania</h3>\n                    <p>@SMarghania</p>\n                </div>\n            </div>\n            <SettingsOutlinedIcon style={{cursor:'pointer'}}/>\n            </div>\n            \n            <div className=\"chat__message__section\">\n             {messages.map((value)=>{\n                  return (\n                      <ChatProfile\n                      key={value._id}\n                      id={value._id}\n                      message={value.message}\n                      messageimg={value.image}\n                      />\n                  )\n              })}\n            </div>\n\n            <div className=\"chat__bottom__box\">\n                <div className=\"chat__bottom__form\">\n                    <div className=\"chat__bottom__icons\">\n                    <div className=\"home__uploadImage\">\n                        <label htmlFor=\"messageImage\">\n                            <ImageOutlinedIcon style={{color:'rgba(29,161,242,1.00)',cursor:'pointer'}}/>\n                        </label>\n                        <input id=\"messageImage\" \n                        onChange={onChangeFile} \n                        name=\"file\" \n                        type=\"file\" \n                        />\n\n                    </div>\n                    </div>\n                    <div className=\"chat__bottom__input\">\n                        <input onChange={ (e) => setMessage(e.target.value)} type=\"text\" placeholder='Start a new message' />\n                    </div>\n                    <div className=\"chat__bottom__icons2 \">\n                  { (message || fileData)  &&    <SendIcon  onClick={fileData ? HandleMessage : HandleText} style={{color: \"rgb(29, 161, 242)\",cursor:'pointer'}} />\n }\n  </div>\n                </div>\n            </div>\n        </div>\n    )\n}\n\nexport default Chat\n"]},"metadata":{},"sourceType":"module"}