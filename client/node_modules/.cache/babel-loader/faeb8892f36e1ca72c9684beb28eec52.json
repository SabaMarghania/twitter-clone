{"ast":null,"code":"var _jsxFileName = \"/home/sab4/Desktop/twitter-clone/client/src/components/Post.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport './Post.css';\nimport Avatar from '@material-ui/core/Avatar';\nimport MoreHorizIcon from '@material-ui/icons/MoreHoriz';\nimport ClickAwayListener from '@material-ui/core/ClickAwayListener';\nimport DeleteOutlineIcon from '@material-ui/icons/DeleteOutline';\nimport EditOutlinedIcon from '@material-ui/icons/EditOutlined';\nimport Axios from 'axios';\nimport Modal from '@material-ui/core/Modal';\nimport { useSelector } from \"react-redux\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Post({\n  post,\n  image,\n  id\n}) {\n  _s();\n\n  const [open, setOpen] = useState(false);\n  const [Isopen, setIsOpen] = useState(false);\n  const [update, setUpdate] = useState(false);\n  const [newText, setNewText] = useState('');\n  const [newFile, setNewFile] = useState('');\n  const [newFileData, setNewFileData] = useState(''); //file\n\n  const onChangeFile = e => {\n    setNewFile(e.target.files[0]);\n    setNewFileData(e.target.value);\n  }; //modal\n\n\n  const handleClick = () => {\n    setOpen(prev => !prev);\n  };\n\n  const handleClickAway = () => {\n    setOpen(false);\n  }; //edit & del modal\n\n\n  const handleOpen = () => {\n    setIsOpen(true);\n  };\n\n  const handleClose = () => {\n    setIsOpen(false);\n  };\n\n  const userLogin = useSelector(state => state.userLogin);\n  const {\n    userInfo\n  } = userLogin; //edit post\n\n  /* created two buttons to not get\n    undefined of originalName in nodejs\n  \n    editPost will post text and image\n    editPost2 only text\n  */\n\n  const editPost = () => {\n    setUpdate(true);\n    setTimeout(() => {\n      setIsOpen(false);\n    }, 500);\n    const formData = new FormData();\n    formData.append(\"id\", id);\n    formData.append(\"newText\", newText);\n    formData.append(\"image\", newFile);\n    Axios.put(\"http://localhost:3001/edit\", formData);\n  };\n\n  const editPost2 = () => {\n    setUpdate(true);\n    setTimeout(() => {\n      setIsOpen(false);\n    }, 500);\n    const formData = new FormData();\n    formData.append(\"id\", id);\n    formData.append(\"newText\", newText);\n    Axios.put(\"http://localhost:3001/edit2\", formData).then(() => {\n      setLoad(true);\n    });\n  }; //delete post\n\n\n  const delPost = async () => {\n    await Axios.delete(`http://localhost:3001/delete/${id}`);\n    Axios.put(\"http://localhost:3001/edit2\", formData).then(() => {\n      setLoad(true);\n    });\n  };\n\n  const body = /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"edit_modal_body\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Edit the post\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 9\n    }, this), update && /*#__PURE__*/_jsxDEV(\"h1\", {\n      style: {\n        color: 'green',\n        marginTop: '10px'\n      },\n      children: \"Post has been updated\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 24\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"edit_modal_body_cont\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        onChange: e => {\n          setNewText(e.target.value);\n        },\n        value: newText,\n        type: \"text\",\n        placeholder: \"Text..\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        onChange: onChangeFile,\n        name: \"file\",\n        type: \"file\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"edit_modal_button\",\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: newFile ? editPost : editPost2,\n        type: \"submit\",\n        children: \"Edit\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 96,\n    columnNumber: 5\n  }, this);\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"post\",\n    children: [/*#__PURE__*/_jsxDEV(Avatar, {\n      src: userInfo === null || userInfo === void 0 ? void 0 : userInfo.pic,\n      style: {\n        width: '50px',\n        height: '50px'\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 14\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"post__info\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"post__top_info\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"post__info_names\",\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            children: userInfo === null || userInfo === void 0 ? void 0 : userInfo.username\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 119,\n            columnNumber: 24\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"@\", userInfo === null || userInfo === void 0 ? void 0 : userInfo.username]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 120,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"post__info__edit\",\n          children: /*#__PURE__*/_jsxDEV(ClickAwayListener, {\n            onClickAway: handleClickAway,\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"post_modal_root\",\n              children: [/*#__PURE__*/_jsxDEV(MoreHorizIcon, {\n                onClick: handleClick,\n                style: {\n                  cursor: 'pointer'\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 127,\n                columnNumber: 25\n              }, this), open ? /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"post_modal_dropdown\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  onClick: () => delPost(id),\n                  className: \"post_modal__option\",\n                  children: [/*#__PURE__*/_jsxDEV(DeleteOutlineIcon, {\n                    style: {\n                      color: 'red'\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 131,\n                    columnNumber: 37\n                  }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n                    children: \"Delete\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 132,\n                    columnNumber: 37\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 130,\n                  columnNumber: 33\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  onClick: handleOpen,\n                  className: \"post_modal__option\",\n                  children: [/*#__PURE__*/_jsxDEV(EditOutlinedIcon, {\n                    style: {\n                      color: 'black',\n                      fontSize: '20px'\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 135,\n                    columnNumber: 37\n                  }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n                    style: {\n                      color: '#000'\n                    },\n                    children: \"Edit\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 136,\n                    columnNumber: 37\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 134,\n                  columnNumber: 33\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 129,\n                columnNumber: 29\n              }, this) : null]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 126,\n              columnNumber: 25\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 125,\n            columnNumber: 21\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 15\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: post\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 20\n      }, this), image && /*#__PURE__*/_jsxDEV(\"img\", {\n        width: \"300px\",\n        src: image,\n        alt: \"\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 28\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      open: Isopen,\n      onClose: handleClose,\n      \"aria-labelledby\": \"simple-modal-title\",\n      \"aria-describedby\": \"simple-modal-description\",\n      children: body\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 113,\n    columnNumber: 9\n  }, this);\n}\n\n_s(Post, \"nSr52sMsk/gl5FpwseCqIArW+wc=\", false, function () {\n  return [useSelector];\n});\n\n_c = Post;\nexport default Post;\n\nvar _c;\n\n$RefreshReg$(_c, \"Post\");","map":{"version":3,"sources":["/home/sab4/Desktop/twitter-clone/client/src/components/Post.js"],"names":["React","useState","Avatar","MoreHorizIcon","ClickAwayListener","DeleteOutlineIcon","EditOutlinedIcon","Axios","Modal","useSelector","Post","post","image","id","open","setOpen","Isopen","setIsOpen","update","setUpdate","newText","setNewText","newFile","setNewFile","newFileData","setNewFileData","onChangeFile","e","target","files","value","handleClick","prev","handleClickAway","handleOpen","handleClose","userLogin","state","userInfo","editPost","setTimeout","formData","FormData","append","put","editPost2","then","setLoad","delPost","delete","body","color","marginTop","pic","width","height","username","cursor","fontSize"],"mappings":"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","sourcesContent":["import React,{useState} from 'react'\nimport './Post.css'\nimport Avatar from '@material-ui/core/Avatar';\nimport MoreHorizIcon from '@material-ui/icons/MoreHoriz';\nimport ClickAwayListener from '@material-ui/core/ClickAwayListener';\nimport DeleteOutlineIcon from '@material-ui/icons/DeleteOutline';\nimport EditOutlinedIcon from '@material-ui/icons/EditOutlined';\nimport Axios from 'axios'\nimport Modal from '@material-ui/core/Modal';\nimport {  useSelector } from \"react-redux\";\n\nfunction Post({post,image,id}) {\n    const [open, setOpen] = useState(false);\n    const [Isopen, setIsOpen] = useState(false);\n    const [update, setUpdate] = useState(false);\n    const [newText, setNewText] = useState('')\n    const [newFile, setNewFile] = useState('')\n    const [newFileData, setNewFileData] = useState('')\n\n    //file\n\n    const onChangeFile = (e) =>{\n     setNewFile(e.target.files[0]);\n     setNewFileData(e.target.value)\n   }\n\n //modal\n const handleClick = () => {\n    setOpen((prev) => !prev);\n  };\n\n  const handleClickAway = () => {\n    setOpen(false);\n  };\n\n  //edit & del modal\n  const handleOpen = () => {\n    setIsOpen(true);\n  };\n\n  const handleClose = () => {\n    setIsOpen(false);\n  };\n  const userLogin = useSelector((state) => state.userLogin);\n  const {userInfo } = userLogin;\n\n//edit post\n/* created two buttons to not get\n  undefined of originalName in nodejs\n\n  editPost will post text and image\n  editPost2 only text\n*/\n  const editPost = () =>{\n    setUpdate(true)\n    \n    setTimeout(()=>{\n        setIsOpen(false);\n\n    },500)\n    const formData = new FormData();\n    formData.append(\"id\", id)\n    formData.append(\"newText\", newText)\n    formData.append(\"image\", newFile)\n\n     Axios.put(\"http://localhost:3001/edit\",formData)\n    \n  }\n  const editPost2 = () =>{\n    setUpdate(true)\n    \n    setTimeout(()=>{\n        setIsOpen(false);\n\n    },500)\n    const formData = new FormData();\n    formData.append(\"id\", id)\n    formData.append(\"newText\", newText)\n\n     Axios.put(\"http://localhost:3001/edit2\",formData)\n     .then(() => {\n      setLoad(true);\n    })\n  }\n  //delete post\n  const delPost = async () =>{\n  await  Axios.delete(`http://localhost:3001/delete/${id}`)\n  Axios.put(\"http://localhost:3001/edit2\",formData)\n  .then(() => {\n   setLoad(true);\n })\n  }\n\n\n  const body = (\n    <div className=\"edit_modal_body\">\n        <h1>Edit the post</h1>\n\n            {update && <h1 style={{color:'green',marginTop:'10px'}}>Post has been updated</h1>}\n        <div className=\"edit_modal_body_cont\">\n            <input onChange={(e)=>{setNewText(e.target.value)}} value={newText} type=\"text\" placeholder='Text..' />\n            <input onChange={onChangeFile} name='file' type=\"file\" />\n        </div>\n        \n        <div className=\"edit_modal_button\">\n            <button onClick={ newFile ? editPost : editPost2} type='submit'>Edit</button>\n        </div>\n   \n    </div>\n  );\n    return (\n       \n        <div className='post'>\n             <Avatar src={userInfo?.pic} style={{width:'50px',height:'50px'}}/>\n            <div className=\"post__info\">\n              <div className=\"post__top_info\">\n                 \n                    <div className=\"post__info_names\">\n                       <h4>{userInfo?.username}</h4>\n                        <p>@{userInfo?.username}</p>\n                     </div>\n                   \n                <div className=\"post__info__edit\">\n                   \n                    <ClickAwayListener onClickAway={handleClickAway}>\n                        <div className='post_modal_root'>\n                        <MoreHorizIcon onClick={handleClick} style={{cursor:'pointer'}}/>\n                            {open ? (\n                            <div className='post_modal_dropdown'>\n                                <div onClick={()=>delPost(id)} className=\"post_modal__option\">\n                                    <DeleteOutlineIcon style={{color:'red'}}/>\n                                    <h4>Delete</h4>\n                                </div>\n                                <div onClick={handleOpen}  className=\"post_modal__option\">\n                                    <EditOutlinedIcon style={{color:'black',fontSize:'20px'}}/>\n                                    <h4 style={{color:'#000'}} >Edit</h4>\n                                </div>\n                            </div>\n                            ) : null}\n                        </div>\n                        </ClickAwayListener>\n                </div>\n                </div>\n                   <p>{post}</p>\n                 {image && <img width='300px' src={image}  alt=\"\"/> }\n\n               \n            </div>\n            <Modal\n                open={Isopen}\n                onClose={handleClose}\n                aria-labelledby=\"simple-modal-title\"\n                aria-describedby=\"simple-modal-description\"\n             >\n                {body}\n            </Modal>\n        </div>\n    )\n}\n\nexport default Post\n"]},"metadata":{},"sourceType":"module"}