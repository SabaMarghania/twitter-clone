{"ast":null,"code":"import _slicedToArray from\"/home/sab4/Desktop/twitter-clone/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect,useRef}from'react';import'./ChatProfile.css';import{useSelector}from\"react-redux\";import Avatar from'@material-ui/core/Avatar';import ClickAwayListener from'@material-ui/core/ClickAwayListener';import MoreVertIcon from'@material-ui/icons/MoreVert';import Axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function ChatProfile(_ref){var message=_ref.message,messageimg=_ref.messageimg,id=_ref.id;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),modal=_useState2[0],setModal=_useState2[1];var userLogin=useSelector(function(state){return state.userLogin;});var userInfo=userLogin.userInfo;var handleClick=function handleClick(){setModal(function(prev){return!prev;});};var handleClickAway=function handleClickAway(){setModal(false);};var messagesEndRef=useRef(null);var scrollToBottom=function scrollToBottom(){messagesEndRef.current.scrollIntoView({behavior:\"smooth\"});};useEffect(scrollToBottom,[message]);var delMsg=function delMsg(){Axios.delete(\"http://localhost:3001/deleteMsg/\".concat(id));};return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"chatProfile\",children:[/*#__PURE__*/_jsx(Avatar,{src:userInfo===null||userInfo===void 0?void 0:userInfo.pic}),/*#__PURE__*/_jsxs(\"div\",{className:\"chatProfile__info_cont\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"chatProfile__info\",children:[message&&/*#__PURE__*/_jsx(\"p\",{children:message}),/*#__PURE__*/_jsx(\"div\",{className:\"chatprofile__img\",children:messageimg&&/*#__PURE__*/_jsx(\"img\",{width:\"300px\",src:\"/uploads/\".concat(messageimg),alt:\"\"})})]}),/*#__PURE__*/_jsx(ClickAwayListener,{onClickAway:handleClickAway,children:/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(MoreVertIcon,{onClick:handleClick,className:\"chatProfile__icon\"})})})]}),modal&&/*#__PURE__*/_jsx(\"div\",{className:\"chat__modal\",children:/*#__PURE__*/_jsx(\"div\",{onClick:delMsg,className:\"chat__modal_del\",children:/*#__PURE__*/_jsx(\"h4\",{children:\"Delete\"})})}),/*#__PURE__*/_jsx(\"div\",{ref:messagesEndRef})]})});}export default ChatProfile;","map":{"version":3,"sources":["/home/sab4/Desktop/twitter-clone/client/src/components/ChatProfile.js"],"names":["React","useState","useEffect","useRef","useSelector","Avatar","ClickAwayListener","MoreVertIcon","Axios","ChatProfile","message","messageimg","id","modal","setModal","userLogin","state","userInfo","handleClick","prev","handleClickAway","messagesEndRef","scrollToBottom","current","scrollIntoView","behavior","delMsg","delete","pic"],"mappings":"0HAAA,MAAOA,CAAAA,KAAP,EAAcC,QAAd,CAAuBC,SAAvB,CAAiCC,MAAjC,KAA8C,OAA9C,CACA,MAAO,mBAAP,CACA,OAASC,WAAT,KAA4B,aAA5B,CACA,MAAOC,CAAAA,MAAP,KAAmB,0BAAnB,CACA,MAAOC,CAAAA,iBAAP,KAA8B,qCAA9B,CACA,MAAOC,CAAAA,YAAP,KAAyB,6BAAzB,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,C,wFACA,QAASC,CAAAA,WAAT,MAA8C,IAAxBC,CAAAA,OAAwB,MAAxBA,OAAwB,CAAhBC,UAAgB,MAAhBA,UAAgB,CAALC,EAAK,MAALA,EAAK,CAC1C,cAAwBX,QAAQ,CAAC,KAAD,CAAhC,wCAAMY,KAAN,eAAYC,QAAZ,eAEA,GAAMC,CAAAA,SAAS,CAAGX,WAAW,CAAC,SAACY,KAAD,QAAWA,CAAAA,KAAK,CAACD,SAAjB,EAAD,CAA7B,CACA,GAAQE,CAAAA,QAAR,CAAqBF,SAArB,CAAQE,QAAR,CAEA,GAAMC,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,EAAM,CACtBJ,QAAQ,CAAC,SAACK,IAAD,QAAU,CAACA,IAAX,EAAD,CAAR,CACD,CAFH,CAIE,GAAMC,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,EAAM,CAC5BN,QAAQ,CAAC,KAAD,CAAR,CACD,CAFD,CAIF,GAAMO,CAAAA,cAAc,CAAGlB,MAAM,CAAC,IAAD,CAA7B,CACA,GAAMmB,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,EAAM,CAC3BD,cAAc,CAACE,OAAf,CAAuBC,cAAvB,CAAsC,CAAEC,QAAQ,CAAE,QAAZ,CAAtC,EACD,CAFD,CAIAvB,SAAS,CAACoB,cAAD,CAAiB,CAACZ,OAAD,CAAjB,CAAT,CACA,GAAMgB,CAAAA,MAAM,CAAG,QAATA,CAAAA,MAAS,EAAK,CAChBlB,KAAK,CAACmB,MAAN,2CAAgDf,EAAhD,GAED,CAHH,CAIA,mBACI,kCACH,aAAK,SAAS,CAAC,aAAf,wBACO,KAAC,MAAD,EAAQ,GAAG,CAAEK,QAAF,SAAEA,QAAF,iBAAEA,QAAQ,CAAEW,GAAvB,EADP,cAEG,aAAK,SAAS,CAAC,wBAAf,wBACA,aAAK,SAAS,CAAC,mBAAf,WACGlB,OAAO,eAAK,mBAAIA,OAAJ,EADf,cAEI,YAAK,SAAS,CAAC,kBAAf,UACKC,UAAU,eAAI,YAAK,KAAK,CAAC,OAAX,CAAmB,GAAG,oBAAcA,UAAd,CAAtB,CAAmD,GAAG,CAAC,EAAvD,EADnB,EAFJ,GADA,cAQI,KAAC,iBAAD,EAAmB,WAAW,CAAES,eAAhC,uBACI,kCACI,KAAC,YAAD,EAAc,OAAO,CAAEF,WAAvB,CAAoC,SAAS,CAAC,mBAA9C,EADJ,EADJ,EARJ,GAFH,CAkBIL,KAAK,eACF,YAAK,SAAS,CAAC,aAAf,uBACI,YAAK,OAAO,CAAEa,MAAd,CAAsB,SAAS,CAAC,iBAAhC,uBACI,8BADJ,EADJ,EAnBP,cAyBG,YAAK,GAAG,CAAEL,cAAV,EAzBH,GADG,EADJ,CAgCH,CAED,cAAeZ,CAAAA,WAAf","sourcesContent":["import React,{useState,useEffect,useRef} from 'react'\nimport './ChatProfile.css'\nimport { useSelector } from \"react-redux\";\nimport Avatar from '@material-ui/core/Avatar';\nimport ClickAwayListener from '@material-ui/core/ClickAwayListener';\nimport MoreVertIcon from '@material-ui/icons/MoreVert';\nimport Axios from 'axios'\nfunction ChatProfile({message,messageimg,id}) {\n    const[modal,setModal] = useState(false)\n\n    const userLogin = useSelector((state) => state.userLogin);\n    const { userInfo } = userLogin;\n\n    const handleClick = () => {\n        setModal((prev) => !prev);\n      };\n    \n      const handleClickAway = () => {\n        setModal(false);\n      };\n\n    const messagesEndRef = useRef(null);\n    const scrollToBottom = () => {\n      messagesEndRef.current.scrollIntoView({ behavior: \"smooth\" });\n    }\n  \n    useEffect(scrollToBottom, [message]);\n    const delMsg = () =>{\n        Axios.delete(`http://localhost:3001/deleteMsg/${id}`)\n       \n      }\n    return (\n        <div>\n     <div className='chatProfile' >\n            <Avatar src={userInfo?.pic} />\n        <div className='chatProfile__info_cont'>\n        <div className='chatProfile__info'>\n          {message &&  <p>{message}</p>}\n            <div className=\"chatprofile__img\">\n                {messageimg && <img width='300px' src={`/uploads/${messageimg}`}  alt=\"\"/>  }\n                \n            </div>\n            </div>\n            <ClickAwayListener onClickAway={handleClickAway}>\n                <div >\n                    <MoreVertIcon onClick={handleClick} className='chatProfile__icon' />\n                </div>\n    </ClickAwayListener>\n        </div>\n\n\n        {modal && (\n            <div className='chat__modal'>\n                <div onClick={delMsg} className=\"chat__modal_del\">\n                    <h4>Delete</h4>\n                </div>\n            </div>\n        )}\n        <div ref={messagesEndRef} />\n\n        </div>\n        </div>\n    )\n}\n\nexport default ChatProfile\n"]},"metadata":{},"sourceType":"module"}