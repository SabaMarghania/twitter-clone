{"ast":null,"code":"import _regeneratorRuntime from\"/home/sab4/Desktop/twitter-clone/client/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/sab4/Desktop/twitter-clone/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/sab4/Desktop/twitter-clone/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import'./Post.css';import Avatar from'@material-ui/core/Avatar';import MoreHorizIcon from'@material-ui/icons/MoreHoriz';import ClickAwayListener from'@material-ui/core/ClickAwayListener';import DeleteOutlineIcon from'@material-ui/icons/DeleteOutline';import EditOutlinedIcon from'@material-ui/icons/EditOutlined';import Axios from'axios';import Modal from'@material-ui/core/Modal';import{useSelector}from\"react-redux\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Post(_ref){var post=_ref.post,image=_ref.image,id=_ref.id;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),open=_useState2[0],setOpen=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),Isopen=_useState4[0],setIsOpen=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),update=_useState6[0],setUpdate=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),newText=_useState8[0],setNewText=_useState8[1];var _useState9=useState(''),_useState10=_slicedToArray(_useState9,2),newFile=_useState10[0],setNewFile=_useState10[1];var _useState11=useState(''),_useState12=_slicedToArray(_useState11,2),newFileData=_useState12[0],setNewFileData=_useState12[1];//file\nvar onChangeFile=function onChangeFile(e){setNewFile(e.target.files[0]);setNewFileData(e.target.value);};//modal\nvar handleClick=function handleClick(){setOpen(function(prev){return!prev;});};var handleClickAway=function handleClickAway(){setOpen(false);};//edit & del modal\nvar handleOpen=function handleOpen(){setIsOpen(true);};var handleClose=function handleClose(){setIsOpen(false);};var userLogin=useSelector(function(state){return state.userLogin;});var userInfo=userLogin.userInfo;//edit post\n/* created two buttons to not get\n  undefined of originalName in nodejs\n\n  editPost will post text and image\n  editPost2 only text\n*/var editPost=function editPost(){setUpdate(true);setTimeout(function(){setIsOpen(false);},500);var formData=new FormData();formData.append(\"id\",id);formData.append(\"newText\",newText);formData.append(\"image\",newFile);setTimeout(function(){window.location.reload();},1000);Axios.put(\"http://localhost:3001/edit\",formData);};var editPost2=function editPost2(){setUpdate(true);setTimeout(function(){setIsOpen(false);},500);setTimeout(function(){window.location.reload();},1000);var formData=new FormData();formData.append(\"id\",id);formData.append(\"newText\",newText);Axios.put(\"http://localhost:3001/edit2\",formData);};//delete post\nvar delPost=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:window.location.reload();_context.next=3;return Axios.delete(\"http://localhost:3001/delete/\".concat(id));case 3:case\"end\":return _context.stop();}}},_callee);}));return function delPost(){return _ref2.apply(this,arguments);};}();var body=/*#__PURE__*/_jsxs(\"div\",{className:\"edit_modal_body\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Edit the post\"}),update&&/*#__PURE__*/_jsx(\"h1\",{style:{color:'green',marginTop:'10px'},children:\"Post has been updated\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"edit_modal_body_cont\",children:[/*#__PURE__*/_jsx(\"input\",{onChange:function onChange(e){setNewText(e.target.value);},value:newText,type:\"text\",placeholder:\"Text..\"}),/*#__PURE__*/_jsx(\"input\",{onChange:onChangeFile,name:\"file\",type:\"file\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"edit_modal_button\",children:/*#__PURE__*/_jsx(\"button\",{onClick:newFile?editPost:editPost2,type:\"submit\",children:\"Edit\"})})]});return/*#__PURE__*/_jsxs(\"div\",{className:\"post\",children:[/*#__PURE__*/_jsx(Avatar,{src:userInfo===null||userInfo===void 0?void 0:userInfo.pic,style:{width:'50px',height:'50px'}}),/*#__PURE__*/_jsxs(\"div\",{className:\"post__info\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"post__top_info\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"post__info_names\",children:[/*#__PURE__*/_jsx(\"h4\",{children:userInfo===null||userInfo===void 0?void 0:userInfo.username}),/*#__PURE__*/_jsxs(\"p\",{children:[\"@\",userInfo===null||userInfo===void 0?void 0:userInfo.username]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"post__info__edit\",children:/*#__PURE__*/_jsx(ClickAwayListener,{onClickAway:handleClickAway,children:/*#__PURE__*/_jsxs(\"div\",{className:\"post_modal_root\",children:[/*#__PURE__*/_jsx(MoreHorizIcon,{onClick:handleClick,style:{cursor:'pointer'}}),open?/*#__PURE__*/_jsxs(\"div\",{className:\"post_modal_dropdown\",children:[/*#__PURE__*/_jsxs(\"div\",{onClick:function onClick(){return delPost(id);},className:\"post_modal__option\",children:[/*#__PURE__*/_jsx(DeleteOutlineIcon,{style:{color:'red'}}),/*#__PURE__*/_jsx(\"h4\",{children:\"Delete\"})]}),/*#__PURE__*/_jsxs(\"div\",{onClick:handleOpen,className:\"post_modal__option\",children:[/*#__PURE__*/_jsx(EditOutlinedIcon,{style:{color:'black',fontSize:'20px'}}),/*#__PURE__*/_jsx(\"h4\",{style:{color:'#000'},children:\"Edit\"})]})]}):null]})})})]}),/*#__PURE__*/_jsx(\"p\",{children:post}),image&&/*#__PURE__*/_jsx(\"img\",{width:\"300px\",src:image,alt:\"\"})]}),/*#__PURE__*/_jsx(Modal,{open:Isopen,onClose:handleClose,\"aria-labelledby\":\"simple-modal-title\",\"aria-describedby\":\"simple-modal-description\",children:body})]});}export default Post;","map":{"version":3,"sources":["/home/sab4/Desktop/twitter-clone/client/src/components/Post.js"],"names":["React","useState","Avatar","MoreHorizIcon","ClickAwayListener","DeleteOutlineIcon","EditOutlinedIcon","Axios","Modal","useSelector","Post","post","image","id","open","setOpen","Isopen","setIsOpen","update","setUpdate","newText","setNewText","newFile","setNewFile","newFileData","setNewFileData","onChangeFile","e","target","files","value","handleClick","prev","handleClickAway","handleOpen","handleClose","userLogin","state","userInfo","editPost","setTimeout","formData","FormData","append","window","location","reload","put","editPost2","delPost","delete","body","color","marginTop","pic","width","height","username","cursor","fontSize"],"mappings":"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","sourcesContent":["import React,{useState} from 'react'\nimport './Post.css'\nimport Avatar from '@material-ui/core/Avatar';\nimport MoreHorizIcon from '@material-ui/icons/MoreHoriz';\nimport ClickAwayListener from '@material-ui/core/ClickAwayListener';\nimport DeleteOutlineIcon from '@material-ui/icons/DeleteOutline';\nimport EditOutlinedIcon from '@material-ui/icons/EditOutlined';\nimport Axios from 'axios'\nimport Modal from '@material-ui/core/Modal';\nimport {  useSelector } from \"react-redux\";\n\nfunction Post({post,image,id}) {\n    const [open, setOpen] = useState(false);\n    const [Isopen, setIsOpen] = useState(false);\n    const [update, setUpdate] = useState(false);\n    const [newText, setNewText] = useState('')\n    const [newFile, setNewFile] = useState('')\n    const [newFileData, setNewFileData] = useState('')\n\n    //file\n\n    const onChangeFile = (e) =>{\n     setNewFile(e.target.files[0]);\n     setNewFileData(e.target.value)\n   }\n\n //modal\n const handleClick = () => {\n    setOpen((prev) => !prev);\n  };\n\n  const handleClickAway = () => {\n    setOpen(false);\n  };\n\n  //edit & del modal\n  const handleOpen = () => {\n    setIsOpen(true);\n  };\n\n  const handleClose = () => {\n    setIsOpen(false);\n  };\n  const userLogin = useSelector((state) => state.userLogin);\n  const {userInfo } = userLogin;\n\n//edit post\n/* created two buttons to not get\n  undefined of originalName in nodejs\n\n  editPost will post text and image\n  editPost2 only text\n*/\n  const editPost = () =>{\n    setUpdate(true)\n    \n    setTimeout(()=>{\n        setIsOpen(false);\n\n    },500)\n    const formData = new FormData();\n    formData.append(\"id\", id)\n    formData.append(\"newText\", newText)\n    formData.append(\"image\", newFile)\n    setTimeout(()=>{\n      window. location.reload()\n\n  },1000)\n     Axios.put(\"http://localhost:3001/edit\",formData)\n    \n  }\n  const editPost2 = () =>{\n    setUpdate(true)\n    \n    setTimeout(()=>{\n        setIsOpen(false);\n\n    },500)\n    setTimeout(()=>{\n      window. location.reload()\n\n  },1000)\n    const formData = new FormData();\n    formData.append(\"id\", id)\n    formData.append(\"newText\", newText)\n\n     Axios.put(\"http://localhost:3001/edit2\",formData)\n    \n  }\n  //delete post\n  const delPost = async () =>{\n    window. location.reload()\n\n  await  Axios.delete(`http://localhost:3001/delete/${id}`)\n \n  }\n\n\n  const body = (\n    <div className=\"edit_modal_body\">\n        <h1>Edit the post</h1>\n\n            {update && <h1 style={{color:'green',marginTop:'10px'}}>Post has been updated</h1>}\n        <div className=\"edit_modal_body_cont\">\n            <input onChange={(e)=>{setNewText(e.target.value)}} value={newText} type=\"text\" placeholder='Text..' />\n            <input onChange={onChangeFile} name='file' type=\"file\" />\n        </div>\n        \n        <div className=\"edit_modal_button\">\n            <button onClick={ newFile ? editPost : editPost2} type='submit'>Edit</button>\n        </div>\n   \n    </div>\n  );\n    return (\n       \n        <div className='post'>\n             <Avatar src={userInfo?.pic} style={{width:'50px',height:'50px'}}/>\n            <div className=\"post__info\">\n              <div className=\"post__top_info\">\n                 \n                    <div className=\"post__info_names\">\n                       <h4>{userInfo?.username}</h4>\n                        <p>@{userInfo?.username}</p>\n                     </div>\n                   \n                <div className=\"post__info__edit\">\n                   \n                    <ClickAwayListener onClickAway={handleClickAway}>\n                        <div className='post_modal_root'>\n                        <MoreHorizIcon onClick={handleClick} style={{cursor:'pointer'}}/>\n                            {open ? (\n                            <div className='post_modal_dropdown'>\n                                <div onClick={()=>delPost(id)} className=\"post_modal__option\">\n                                    <DeleteOutlineIcon style={{color:'red'}}/>\n                                    <h4>Delete</h4>\n                                </div>\n                                <div onClick={handleOpen}  className=\"post_modal__option\">\n                                    <EditOutlinedIcon style={{color:'black',fontSize:'20px'}}/>\n                                    <h4 style={{color:'#000'}} >Edit</h4>\n                                </div>\n                            </div>\n                            ) : null}\n                        </div>\n                        </ClickAwayListener>\n                </div>\n                </div>\n                   <p>{post}</p>\n                 {image && <img width='300px' src={image}  alt=\"\"/> }\n\n               \n            </div>\n            <Modal\n                open={Isopen}\n                onClose={handleClose}\n                aria-labelledby=\"simple-modal-title\"\n                aria-describedby=\"simple-modal-description\"\n             >\n                {body}\n            </Modal>\n        </div>\n    )\n}\n\nexport default Post\n"]},"metadata":{},"sourceType":"module"}